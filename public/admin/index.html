<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - Hochschul ABC Management</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="/admin/toastui/toastui-editor.css" rel="stylesheet">
  <script src="/admin/toastui/toastui-editor.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script defer type="module" src="/admin/admin.js"></script>
  <link rel="icon" href="/favicon.ico">
  <style>
    :root {
        --bg-color: #e0e0e0;
        --app-bg: #e9ecef;
        --content-bg: #ffffff;
        --primary-text: #1f2937;
        --secondary-text: #6b7280;
        --border-color: #e5e7eb;
        --accent-color: #EC6608;
        --accent-dark: #d95f07;
        --input-border: #d1d5db;
        --font-family: 'Roboto', sans-serif;
    }
    body {
        font-family: var(--font-family);
    }
    .nav-link.active {
        background-color: var(--accent-color);
        color: white;
    }
    .nav-link.active:hover {
        background-color: var(--accent-dark);
    }
    .btn-primary {
        background-color: var(--accent-color);
        color: white;
    }
    .btn-primary:hover {
        background-color: var(--accent-dark);
    }
    .btn-secondary {
        background-color: var(--content-bg);
        color: var(--primary-text);
        border: 1px solid var(--border-color);
    }
    .btn-secondary:hover {
        background-color: var(--app-bg);
    }
  </style>
</head>
<body class="flex h-screen bg-[var(--bg-color)] text-[var(--primary-text)]">

  <!-- Sidebar Navigation -->
  <aside class="w-64 flex-shrink-0 bg-[var(--app-bg)] p-6 flex flex-col border-r border-[var(--border-color)]">
    <div class="flex justify-center items-center mb-8">
        <img src="/image/HTW.svg" alt="HTWD Logo" class="h-16">
    </div>
    <nav id="main-menu" class="flex-grow space-y-2">
        <a href="#" id="btn-editor" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg font-medium transition-colors">
            <span>Editor</span>
        </a>
        <a href="#" id="btn-questions" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg font-medium transition-colors">
            <span>Fragen</span>
            <span id="open-count" class="ml-auto text-sm bg-red-500 text-white rounded-full px-2">0</span>
        </a>
        <a href="#" id="btn-archive" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg font-medium transition-colors">
            <span>Archiv</span>
        </a>
        <a href="#" id="btn-feedback" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg font-medium transition-colors">
            <span>Feedback</span>
        </a>
        <a href="#" id="btn-export" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg font-medium transition-colors">
            <span>Export</span>
        </a>
        <a href="#" id="btn-user" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg font-medium transition-colors hidden">
            <span>Benutzer</span>
        </a>
    </nav>
    <div class="mt-auto">
        <a href="#" id="btn-logout" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg font-medium transition-colors">
            <span>Logout</span>
        </a>
    </div>
  </aside>

  <main class="flex-1 flex flex-col overflow-hidden bg-[var(--content-bg)]">
    <!-- Editor View -->
    <div id="editor-view" class="flex flex-1 overflow-hidden">
      <!-- Left Sidebar: Headlines (25%) -->
      <div class="w-1/4 bg-[var(--app-bg)] border-r border-[var(--border-color)] flex flex-col">
        <!-- Search Field -->
        <div class="p-4 border-b border-[var(--border-color)]">
          <input
            id="search"
            type="text"
            placeholder="Suchen..."
            class="w-full px-3 py-2 border border-[var(--input-border)] rounded-md focus:outline-none focus:ring-2 focus:ring-[var(--accent-color)] bg-white"
          >
        </div>
        <!-- Headlines List -->
        <div class="flex-1 overflow-y-auto p-4">
          <ul id="headline-list" class="space-y-2"></ul>
        </div>
        <!-- Add Heading Button -->
        <div class="p-4 border-t border-[var(--border-color)]">
          <button id="add-heading" class="w-full px-3 py-2 rounded-md btn-primary transition-colors">
            Neue Überschrift
          </button>
        </div>
      </div>
      <!-- Right Content Area: Text Editor (75%) -->
      <div id="editor-pane" class="w-3/4 flex flex-col">
        <div class="p-4 bg-white border-b border-[var(--border-color)] flex space-x-4 items-center">
          <input id="headline-input" class="p-2 border border-[var(--input-border)] rounded flex-1" placeholder="Überschrift">
          <span id="current-user" class="p-2 text-[var(--secondary-text)] text-sm text-right"></span>
        </div>
        <div id="editor" class="flex-grow"></div>
        <div class="p-4 bg-white border-t border-[var(--border-color)] flex justify-end space-x-4 items-center">
          <label class="flex items-center space-x-2 mr-auto">
            <input id="active-toggle" type="checkbox" class="h-4 w-4 text-[var(--accent-color)] focus:ring-[var(--accent-color)] border-[var(--input-border)] rounded">
            <span>Aktiv</span>
          </label>
          <button id="delete-btn" class="px-4 py-2 rounded-md bg-red-600 hover:bg-red-700 text-white transition-colors">Löschen</button>
          <button id="save-btn" class="px-4 py-2 rounded-md btn-primary transition-colors" disabled>Speichern</button>
        </div>
      </div>
    </div>
    <!-- Question Management View -->
    <div id="questions-view" class="flex flex-col flex-1 hidden p-6 space-y-4 overflow-y-auto">
      <input id="question-search" class="p-2 border border-[var(--input-border)] rounded-md mb-2 w-full max-w-md" placeholder="Suche...">
      <div class="mb-4 space-x-2">
        <button id="tab-open" class="px-4 py-2 rounded-md btn-primary">Offene Fragen</button>
        <button id="tab-answered" class="px-4 py-2 rounded-md btn-secondary">Beantwortete Fragen</button>
      </div>
      <div class="mb-2">
        <button id="delete-selected" class="px-4 py-2 rounded-md bg-red-600 hover:bg-red-700 text-white transition-colors hidden">Ausgewählte löschen</button>
      </div>
      <div id="open-list" class="space-y-4"></div>
      <div id="answered-list" class="space-y-4 hidden"></div>
    </div>
    <!-- Archive View -->
    <div id="archive-view" class="flex flex-col flex-1 hidden p-6 space-y-4 overflow-y-auto">
      <div class="flex mb-2 space-x-4">
        <input id="archive-search" class="flex-1 p-2 border border-[var(--input-border)] rounded-md" placeholder="Suche...">
        <select id="archive-sort" class="p-2 border border-[var(--input-border)] rounded-md">
          <option value="newest">Neueste</option>
          <option value="oldest">Älteste</option>
          <option value="editor">Geändert von</option>
        </select>
      </div>
      <div id="archive-list" class="space-y-4"></div>
    </div>
    <!-- Feedback View -->
    <div id="feedback-view" class="flex flex-col flex-1 hidden p-6 space-y-4 overflow-y-auto">
      <div id="feedback-list" class="space-y-4"></div>
    </div>
    <!-- User Management View -->
    <div id="user-view" class="flex flex-col flex-1 hidden p-6 space-y-4 overflow-y-auto">
      <div id="user-admin" class="p-6 space-y-4 border border-[var(--border-color)] rounded-lg">
        <h2 class="font-semibold text-lg">Neuen Benutzer anlegen</h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <input id="new-user" class="border p-2 rounded-md border-[var(--input-border)]" placeholder="Username">
            <input id="new-pass" type="password" class="border p-2 rounded-md border-[var(--input-border)]" placeholder="Passwort">
            <select id="new-role" class="p-2 border rounded-md border-[var(--input-border)]">
              <option value="editor">Editor</option>
              <option value="admin">Admin</option>
              <option value="entwickler">Entwickler</option>
            </select>
        </div>
        <button id="create-user" class="px-4 py-2 btn-primary rounded-md">Anlegen</button>
        <p class="text-sm text-[var(--secondary-text)]">Das Anlegen kann bis zu 1 Minute dauern.</p>
      </div>
      <div class="p-6 space-y-4 border border-[var(--border-color)] rounded-lg">
          <h2 class="font-semibold text-lg">Benutzerliste</h2>
          <div id="user-list" class="space-y-2"></div>
      </div>
    </div>

    <!-- Move Answer Modal -->
    <div id="move-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-white p-6 rounded-lg shadow-xl w-full max-w-md">
        <h3 class="text-lg font-medium mb-4">Antwort verschieben</h3>
        <p class="mb-4 text-[var(--secondary-text)]">Zu welcher Überschrift soll diese Antwort hinzugefügt werden?</p>
        <select id="move-select" class="border p-2 w-full mb-2 rounded-md border-[var(--input-border)]"></select>
        <input id="move-new" class="border p-2 w-full mb-4 rounded-md border-[var(--input-border)]" placeholder="Oder neue Überschrift erstellen...">
        <div class="flex justify-end space-x-2">
          <button id="move-cancel" class="px-4 py-2 rounded-md btn-secondary">Abbrechen</button>
          <button id="move-confirm" class="px-4 py-2 rounded-md btn-primary">Speichern</button>
        </div>
      </div>
    </div>

    <!-- Export Modal -->
    <div id="export-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-white p-6 rounded-lg shadow-xl w-full max-w-sm">
        <h3 class="text-lg font-medium mb-4">Daten exportieren</h3>
        <p class="mb-4 text-[var(--secondary-text)]">Welches Format möchten Sie exportieren?</p>
        <div class="flex justify-end space-x-2">
            <button id="export-cancel" class="px-4 py-2 rounded-md btn-secondary">Abbrechen</button>
            <button id="export-json" class="px-4 py-2 rounded-md btn-primary">JSON</button>
            <button id="export-pdf" class="px-4 py-2 rounded-md btn-primary">PDF</button>
        </div>
      </div>
    </div>
  </main>
</body>
</html>